<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Task On</title>
  <link rel="stylesheet" type="text/css" href="master.css" media="screen" />
  <script type="text/javascript" src="./lib/jberry.js" charset="utf-8"></script>
</head>

<body>
  <div id="myDIV" class="header">
    <h2>Task On </h2>
    <form id='todo-form'>
      <input id='todo_input' type="text" placeholder="Task to complete...">
      <button type="submit" class="button">Add</button>
    </form>
  </div>

  <ul id="todo-ul">
    <li>Learn Ruby</li>
    <li>Update resume</li>
    <li>Javascript game proposal</li>
    <li class="completed">Fullstack project</li>
    <li>Read Cracking the Coding Interview</li>
    <li>Code Intensive project</li>
  </ul>

  <script>
    // Add todo function
    $b("#todo-form").on("submit", event => {
      event.preventDefault();
      const input = $b("#todo_input");
      const val = input.array[0].value
      input.array[0].value = "";
      $b("#todo-ul").append(`<li>${val}</li>`);
    });

    //crossed off todo item
    let todoList = $b('ul').array[0]
    $b(todoList).on('click', function(event) {
      if ($b(event.target).attr("class") === "completed") {
        $b(event.target).removeClass('completed')
      } else {
        $b(event.target).addClass('completed');
      }
    })

    // delete item button
    let todoItems = $b('li').array
    for (todoItem of todoItems) {
      $b(todoItem).append("<div class='close'>X</div>")
      let closeButton = $b(todoItem).find("div")
    }
    //delete item function
    let closeButtons = $b('.close').array
    for (closeButton of closeButtons) {
      closeButton.onclick = function() {
        var div = this.parentElement;
        div.style.display = "none";
      }
    }
  </script>

  <div class="credit">
    Developed with jBerry<br />
    by <a href="benpong.com">Ben Pong</a>
  </div>
</body>

</html>