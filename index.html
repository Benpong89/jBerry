<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Task On</title>
  <link rel="shortcut icon" type="image/png" href="./lib/TO.png" />
  <link rel="stylesheet" type="text/css" href="master.css" media="screen" />
  <script type="text/javascript" src="./lib/jberry.js" charset="utf-8"></script>
</head>

<body>
  <div id="myDIV" class="header">
    <h2>Task On</h2>
    <blockquote class='message'><q></q></blockquote>
    <form id='todo-form'>
      <input id='todo_input' type="text" placeholder="Task to complete...">
      <button type="submit" class="button">Add</button>
    </form>
  </div>

  <ul id="todo-ul">
    <li>Update resume</li>
    <li>Learn Python</li>
    <li>JavaScript game</li>
    <li class="completed">Fullstack project</li>
    <li>Read Cracking the Coding Interview</li>
    <li>Code Intensive project</li>
  </ul>


  <script>
    // Add todo function
    $b("#todo-form").on("submit", event => {
      event.preventDefault();
      const input = $b("#todo_input");
      const val = input.array[0].value
      input.array[0].value = "";
      $b("#todo-ul").append(`<li>${val}</li>`);
      $b($b('li').array[$b('li').array.length - 1]).append("<div class='close'>X</div>")
      deleteItem()
    });

    //crossed off todo item
    let todoList = $b('ul').array[0]
    $b(todoList).on('click', function(event) {
      if ($b(event.target).attr("class") === "completed") {
        $b(event.target).removeClass('completed')
      } else {
        $b(event.target).addClass('completed');
      }
    })

    // delete item button
    let todoItems = $b('li').array
    for (todoItem of todoItems) {
      $b(todoItem).append("<div class='close'>X</div>")
      let closeButton = $b(todoItem).find("div")
    }
    //delete item function

    function deleteItem() {
      let closeButtons = $b('.close').array
      for (closeButton of closeButtons) {
        closeButton.onclick = function() {
          let div = this.parentElement;
          div.style.display = "none";
        }
      }
    }

    function revealQuote() {
      let quoteArray = [
        "Make each day your masterpiece..",
        "Begin at the beginning… and go on till you come to the end...",
        "Tough times never last, only tough people do...",
        "To be the best, you must be able to handle the worst...",
        "What we think, we become...",
        "It is never too late to be what you might have been...",
        "Nothing is impossible, the word itself says ‘I’m possible’!...",
        "You never fail until you stop trying...",
        "Don’t judge each day by the harvest you reap but by the seeds that you plant...",
        "Be the change that you wish to see in the world...",
        "Always do what you are afraid to do...",
        "Pain is temporary. Quitting lasts forever....",
      ]

      let quote = quoteArray[Math.floor(Math.random() * quoteArray.length)];
      $b('q').empty()
      $b('q').append(quote)
    }

    deleteItem()
    setInterval(revealQuote, 8000)
  </script>

  <div class="credit">
    Developed with jBerry<br />
    by <a href="https://benpong.com/">Ben Pong</a>
  </div>
</body>

</html>