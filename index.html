<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Task On</title>
  <link rel="shortcut icon" type="image/png" href="./lib/TO.png" />
  <link rel="stylesheet" type="text/css" href="master.css" media="screen" />
  <script type="text/javascript" src="./lib/jberry.js" charset="utf-8"></script>
</head>

<body>
  <div id="myDIV" class="header">
    <h2>Task On</h2>
    <form id='todo-form'>
      <input id='todo_input' type="text" placeholder="Task to complete...">
      <button type="submit" class="button">Add</button>
    </form>
  </div>

  <ul id="todo-ul">
    <li>Update resume</li>
    <li>Learn Python</li>
    <li>Javascrip game</li>
    <li class="completed">Fullstack project</li>
    <li>Read Cracking the Coding Interview</li>
    <li>Code Intensive project</li>
  </ul>

  <blockquote class='message' id="message2" contenteditable="true"><q>Make each day your masterpiece...</q>
  </blockquote>

  <blockquote class='message' id="message1" contenteditable="true"><q>Begin at the beginningâ€¦ and go on till you come to the end...</q>
  </blockquote>

  <blockquote class='message' id="message3" contenteditable="true"><q>Tough times never last, only tough people do...</q>
  </blockquote>

  <blockquote class='message' id="message4" contenteditable="true"><q>To be the best, you must be able to handle the worst...</q>
  </blockquote>

  <blockquote class='message' id="message5" contenteditable="true"><q>What we think, we become...</q>
  </blockquote>

  <blockquote class='message' id="message6" contenteditable="true"><q>It is never too late to be what you might have been...</q>
  </blockquote>

  <script>
    // Add todo function
    $b("#todo-form").on("submit", event => {
      event.preventDefault();
      const input = $b("#todo_input");
      const val = input.array[0].value
      input.array[0].value = "";
      $b("#todo-ul").append(`<li>${val}</li>`);
      $b($b('li').array[$b('li').array.length - 1]).append("<div class='close'>X</div>")
    });

    //crossed off todo item
    let todoList = $b('ul').array[0]
    $b(todoList).on('click', function(event) {
      if ($b(event.target).attr("class") === "completed") {
        $b(event.target).removeClass('completed')
      } else {
        $b(event.target).addClass('completed');
      }
    })

    // delete item button
    let todoItems = $b('li').array
    for (todoItem of todoItems) {
      $b(todoItem).append("<div class='close'>X</div>")
      let closeButton = $b(todoItem).find("div")
    }
    //delete item function
    let closeButtons = $b('.close').array
    for (closeButton of closeButtons) {
      closeButton.onclick = function() {
        var div = this.parentElement;
        div.style.display = "none";
      }
    }


    function splitWords() {
      let quote = document.querySelector(".message q");
      quote.hidden = false;
      quote.innerText.replace(/(<([^>]+)>)/ig, "");
      quotewords = quote.innerText.split(" "),
        wordCount = quotewords.length;
      quote.innerHTML = "";
      for (let i = 0; i < wordCount; i++) {
        quote.innerHTML += "<span>" + quotewords[i] + "</span>";
        if (i < quotewords.length - 1) {
          quote.innerHTML += " ";
        }
      }
      quotewords = document.querySelectorAll(".message q span");
      fadeWords(quotewords);
      quote.parentElement.removeAttribute("class")
      // quote.parentElement.setAttribute("class", "solid")
    }

    function getRandom(min, max) {
      return Math.random() * (max - min) + min;
    }

    function fadeWords(quotewords) {
      Array.prototype.forEach.call(quotewords, function(word) {
        let animate = word.animate([{
          opacity: 0,
          filter: "blur(" + getRandom(2, 5) + "px)"
        }, {
          opacity: 1,
          filter: "blur(0px)"
        }], {
          duration: 1000,
          delay: getRandom(500, 3300),
          fill: 'forwards'
        })
      })
    }
    setInterval(splitWords, 3000)
  </script>

  <div class="credit">
    Developed with jBerry<br />
    by <a href="https://benpong.com/">Ben Pong</a>
  </div>
</body>

</html>