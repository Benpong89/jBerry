<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Task On</title>
  <link rel="shortcut icon" type="image/png" href="./lib/TO.png" />
  <link rel="stylesheet" type="text/css" href="master.css" media="screen" />
  <script type="text/javascript" src="./lib/jberry.js" charset="utf-8"></script>
</head>

<body>
  <div id="myDIV" class="header">
    <h2>Task On</h2>
    <blockquote class='message'><q></q></blockquote>
    <form id='todo-form'>
      <input id='todo_input' type="text" placeholder="Task to complete...">
      <button disabled id='button' type="submit" class="button">Add</button>
    </form>
  </div>


  <ul id="todo-ul">
    <div class="flex">
      <li>Update resume</li><span></span>
    </div>
    <div class="flex">
      <li>Learn Python</li><span></span>
    </div>
    <div class="flex">
      <li>JavaScript game</li><span></span>
    </div>
    <div class="flex">
      <li class="completed">Fullstack project</li><span></span>
    </div>
    <div class="flex">
      <li>Read Cracking the Coding Interview</li><span></span>
    </div>
    <div class="flex">
      <li>Code Intensive project</li><span></span>
    </div>
  </ul>

  <script>
    // Add todo function
    $b("#todo-form").on("submit", event => {
      event.preventDefault();
      $b('#button').array[0].disabled = true
      const input = $b("#todo_input");
      const val = input.array[0].value
      input.array[0].value = "";
      $b("#todo-ul").append(`<div class="flex"><li>${val}</li><span><div class='close'>X</div></span></div>`);
      deleteItem()
    });

    //crossed off todo item
    let todoList = $b('ul').array[0]
    $b(todoList).on('click', function(event) {
      if ($b(event.target).attr("class") === "completed") {
        $b(event.target).removeClass('completed')
      } else {
        $b(event.target).addClass('completed');
      }
    })

    // delete item button
    let todoItems = $b('span').array
    for (todoItem of todoItems) {
      $b(todoItem).append("<div class='close'>X</div>")
    }

    //delete item function
    function deleteItem() {
      let closeButtons = $b('.close').array
      for (closeButton of closeButtons) {
        closeButton.onclick = function() {
          let x = this.parentElement;
          let text = this.parentElement.previousSibling
          x.style.display = "none";
          text.style.display = "none";
        }
      }
    }

    //Prevent empty entries
    $b("#todo_input").on("change", function() {
      if (/\S/.test($b('#todo_input').array[0].value)) {
        $b('#button').array[0].disabled = false
      } else {
        $b('#button').array[0].disabled = true
      }
    });

    function revealQuote() {
      let quoteArray = [
        "Make each day your masterpiece..",
        "Begin at the beginning… and go on till you come to the end...",
        "Tough times never last, only tough people do...",
        "To be the best, you must be able to handle the worst...",
        "What we think, we become...",
        "It is never too late to be what you might have been...",
        "Nothing is impossible, the word itself says ‘I’m possible’!...",
        "You never fail until you stop trying...",
        "Don’t judge each day by the harvest you reap but by the seeds that you plant...",
        "Be the change that you wish to see in the world...",
        "Always do what you are afraid to do...",
        "Pain is temporary. Quitting lasts forever....",
      ]

      let quote = quoteArray[Math.floor(Math.random() * quoteArray.length)];
      $b('q').empty()
      $b('q').append(quote)
    }

    deleteItem()
    setInterval(revealQuote, 8000)
  </script>

  <div class="credit">
    Developed with jBerry<br />
    by <a href="https://benpong.com/">Ben Pong</a>
  </div>
</body>

</html>